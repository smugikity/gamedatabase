{% extends 'base.html' %}
{% load static %}
{% block content %}

<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<link rel="stylesheet" type="text/css" href="{% static 'css/game_list.css' %}" />
<script type="text/javascript" src="{% static 'js/game_list.js' %}"></script>


<main class="container my-4">

<h3 class="my-4 border-bottom pb-1"><span class="text-muted">List of </span>Games</h3>

<div class="bg-white rounded d-flex flex-wrap mt-5" id="header"> 
	<div class="d-flex align-items-center">
		<button class="btn btn-hide text-uppercase" type="button" data-toggle="collapse" data-target="#filterbar" aria-expanded="false" aria-controls="filterbar" id="filter-btn" onclick="changeBtnTxt()"> 
			<span class="fas fa-angle-left" id="filter-angle"></span> <span id="btn-txt">Hide filters</span> 
		</button>
	</div>
	<div class="d-flex align-items-center"> 
		<select name="sort" id="sort" onchange="goToPage(current);" value="{{ sort }}">
			{% for key,value in sort_choice.items %}
				<option value="{{ key }}">{{ value }}</option>
			{% endfor %}
		</select>
		<script> 
			$('#sort option[value="{{ sort }}"]').attr('selected','selected');
		</script>
	</div>
	<div class="d-inline-flex align-items-center">
		<div class="d-inline-flex" id="select-game">
			Games: <input type="number" name="n_per" id="pro" min="1" max="15" value="{{ n_per }}" onchange="goToPage(current);"/>
		</div>
		<div class="font-weight-bold mx-1">from {{ count }}</div>
	</div>
	<!--hidden field for page-->
	<div>
		<input type="hidden" value="{{ cur_page }}" id="django-page"/>
		<input type="hidden" value="{{ custom }}" id="django-custom"/>
	</div>
	<div class="ms-auto mr-2">
		<div id="page-collections" class="pagination d-flex align-items-center" value="{{ max_page }}">
			<div class="page-item" id="page-previous"> 
				<button class="page-link btn" type="button" aria-label="Previous"> <span aria-hidden="true" class="font-weight-bold">&lt;</span> <span class="sr-only">Previous</span> </button> 
			</div>
			<div class="page-item" id="page-next"> 
				<button class="page-link btn" type="button" aria-label="Next"> <span aria-hidden="true" class="font-weight-bold">&gt;</span> <span class="sr-only">Next</span> </button> 
			</div>
		</div>
	</div>	
</div>


<div id="content" class="d-flex align-items-start mx-0 my-5"/>
	<!--Filters start-->
	<div id="filterbar" class="collapse">
		<div class="box border-bottom">
			<div class="form-group text-center">
				<div class="btn-group  d-flex flex-wrap" data-toggle="buttons"> 
					<label class="btn btn-success form-check-label"> 
						<input class="form-check-input" type="radio"> Reset 
					</label> 
					<label class="btn btn-success form-check-label active"> 
						<input class="form-check-input" type="radio" checked> Apply 
					</label> 
				</div>
			</div>
			<div> <label class="tick">New <input type="checkbox" checked="checked"> <span class="check"></span> </label> </div>
			<div> <label class="tick">Sale <input type="checkbox"> <span class="check"></span> </label> </div>
		</div>
		<div class="box border-bottom">
			<div class="box-label text-uppercase d-flex align-items-center">Genre 
				<button class="btn ml-auto" type="button" data-toggle="collapse" data-target="#inner-box" aria-expanded="false" aria-controls="inner-box" id="out" onclick="outerFilter()"> 
					<span class="fas fa-plus"></span> 
				</button> 
			</div>
			<div id="inner-box" class="collapse mt-2 mr-1">
				<select id="select2-genre" class="select2-class" name="states[]" multiple="multiple" style="width: 100%">
{% comment %} 		<option value="AL">Alabama</option>
					<option value="WY">Wyoming</option> {% endcomment %}
				</select>
			</div>
		</div>
		<div class="box border-bottom">
			<div class="box-label text-uppercase d-flex align-items-center">season 
				<button class="btn ml-auto" type="button" data-toggle="collapse" data-target="#inner-box2" aria-expanded="false" aria-controls="inner-box2">
					<span class="fas fa-plus"></span>
				</button>
			</div>
			<div id="inner-box2" class="collapse mt-2 mr-1">
				<div class="my-1"> <label class="tick">Spring <input type="checkbox" checked="checked"> <span class="check"></span> </label> </div>
				<div class="my-1"> <label class="tick">Summer <input type="checkbox"> <span class="check"></span> </label> </div>
				<div class="my-1"> <label class="tick">Autumn <input type="checkbox" checked> <span class="check"></span> </label> </div>
				<div class="my-1"> <label class="tick">Winter <input type="checkbox"> <span class="check"></span> </label> </div>
				<div class="my-1"> <label class="tick">Rainy <input type="checkbox"> <span class="check"></span> </label> </div>
			</div>
		</div>
		<div class="box border-bottom">
			<div class="box-label text-uppercase d-flex align-items-center">price 
				<button class="btn ml-auto" type="button" data-toggle="collapse" data-target="#price" aria-expanded="false" aria-controls="price">
					<span class="fas fa-plus"></span>
				</button> 
			</div>
			<div class="collapse" id="price">
			  <div class="middle">
				<div class="multi-range-slider"> <input type="range" id="input-left" min="0" max="100" value="10"> <input type="range" id="input-right" min="0" max="100" value="50">
				  <div class="slider">
					<div class="track"></div>
					<div class="range"></div>
					<div class="thumb left"></div>
					<div class="thumb right"></div>
				  </div>
				</div>
			  </div>
			  <div class="d-flex align-items-center justify-content-between mt-2">
				<div> <span id="amount-left" class="font-weight-bold"></span> uah </div>
				<div> <span id="amount-right" class="font-weight-bold"></span> uah </div>
			  </div>
			</div>
		  </div>
		<div class="box">
			<div class="box-label text-uppercase d-flex align-items-center">size 
				<button class="btn ml-auto" type="button" data-toggle="collapse" data-target="#size" aria-expanded="false" aria-controls="size">
					<span class="fas fa-plus"></span>
				</button> 
			</div>
			<div id="size" class="collapse">
				<div class="btn-group d-flex align-items-center flex-wrap" data-toggle="buttons"> 
					<label class="btn btn-success form-check-label"> 
						<input class="form-check-input" type="checkbox"> 80 </label>
					<label class="btn btn-success form-check-label"> 
						<input class="form-check-input" type="checkbox" checked> 92 
					</label> <label class="btn btn-success form-check-label"> 
						<input class="form-check-input" type="checkbox" checked> 102 
					</label> <label class="btn btn-success form-check-label"> 
						<input class="form-check-input" type="checkbox" checked> 104 
					</label> 
					<label class="btn btn-success form-check-label"> 
						<input class="form-check-input" type="checkbox" checked> 106 
					</label> <label class="btn btn-success form-check-label"> 
						<input class="form-check-input" type="checkbox" checked> 108 
					</label> 
				</div>
			</div>
		</div>
	</div>

	<!--Game card list-->
	<div class="row flex-grow-1 px-3">
		{% if data %}
		{% for item in data %}
			<div class="col-lg-4 col-md-6 pb-2">
				<div class="card d-flex flex-column align-items-center" onclick='viewCustomItem("{{ custom }}",{{ item.id }});' data-toggle="modal" data-target="#viewModal">
					<div class="product-name">{{ item.title }}</div>
					<div class="card-img "> <img src="/media/{{item.image}}" alt=""> </div>
					{% comment %} <div class="card-body pt-4">
						<div class="d-flex align-items-center price">
						<div class="del mr-2"><span class="text-dark">5500 uah</span></div>
						<div class="font-weight-bold">4500 uah</div>
						</div>
					</div> {% endcomment %}
				</div>
			</div>
		{% endfor %}
		{% endif %}
	</div>
</div>
</main>
{% endblock %}